import{u as a,p as e,c as l,a as t,q as s,B as i,r as n,b as r,d as u,e as o,f as c,g as d,h as v,t as p,i as h,F as f,j as m,k as g,v as x,l as b,m as y,o as k,n as _}from"./index.73d977ee.js";import{u as w,a as P}from"./page.cebb6174.js";const j={class:"milk-header"},A={class:"header-nav"},N={class:"nav-menu"},C={id:"Home"},T=o("i",{class:"fa fa-home","aria-hidden":"true"},null,-1),B={id:"Archives"},D=o("i",{class:"fa fa-archive","aria-hidden":"true"},null,-1),F={id:"About"},H=o("i",{class:"fa fa-user-circle","aria-hidden":"true"},null,-1),L=o("span",{class:"nav-date"},[o("i",{class:"fa fa-calendar","aria-hidden":"true"}),o("span",{id:"date"})],-1),q=o("span",{class:"nav-system",id:"nav-system"},null,-1),z={class:"nav-access"},E=o("i",{class:"fa fa-universal-access",id:"nav-access"},null,-1),I=o("i",{class:"fa fa-angle-down"},null,-1),M={class:"dropdown-content",id:"dropdown-content"},O=y('<ul class="social"><li><a href="https://github.com/Ajinya57/FinalBlog" target="_blank" rel="noopener"><i class="fa fa-github-alt" aria-hidden="true"></i></a></li><li><a href="mailto:zhongyejun168@gmail.com"><i class="fa fa-envelope" aria-hidden="true"></i></a></li></ul>',1),Q={key:0},R={key:0},U={href:"Login.vue",target:"_blank",rel:"noopener"},$={key:1},G={key:1},J=o("a",{href:"Login.vue",target:"_blank",rel:"noopener"},"***",-1),K={key:0},S={class:"milk-body"},V={class:"win"},W={class:"win-title"},X={class:"win-body"},Y={class:"archive"},Z={class:"archive-item"},aa={class:"archive-article archive-type-post"},ea={class:"archive-article-inner"},la={class:"archive-article-header"},ta=["datetime"],sa={itemprop:"name"},ia={class:"paginator"},na={key:0,class:"page-number current"},ra={key:2,class:"space"};var ua={__name:"Tags",setup(y){const ua=a(),oa=e(),ca=l((()=>ua.getters.user)),da=()=>{ua.dispatch("logout")},va=t(""),pa=t([]),ha=t(0);w(),P(),s((async()=>{const a=await i.get(`/api/getTags.php?id=${oa.params.id}`);va.value=a.data.name,pa.value=a.data.blogs,ha.value=pa.value.length}));const fa=n({isPrev:!1,isNext:!1}),ma=t(1),ga=l((()=>{let a={};const e=(a,e)=>new Date(a.date)-new Date(e.date);pa.value.forEach((e=>{let l=e.date.slice(0,4);a[l]||(a[l]=[]),a[l].push(e)}));for(let l in a)a[l].sort(e);return a})),xa=l((()=>{_a();let a={};const e=10*(ma.value-1),l=10*ma.value;let t=Object.keys(ga.value).sort(),s=0;for(let i=0;i<t.length;i++){let n=t[i],r=ga.value[n];if(s>=l)break;if(s+r.length<=e){s+=r.length;continue}let u=r.slice(e>s?e-s:0,l-s);a[n]=u,s<e&&(s=e),s+=u.length}return a}));var ba=n([]);const ya=()=>{ma.value--},ka=()=>{ma.value++},_a=()=>{const a=Math.ceil(ha.value/10);if(ba=n([]),a<=1)ba.push({text:1});else{if(1===ma.value?fa.isPrev=!1:fa.isPrev=!0,a<=8)for(let e=1;e<=a;e++)ba.push({text:e});else{if(ma.value<=2)for(let a=1;a<=4;a++)ba.push({text:a});else ba.push({text:1}),ba.push({text:"..."});if(ma.value>=3&&ma.value<=a-3)for(let a=ma.value-1;a<=ma.value+1;a++)ba.push({text:a});if(ma.value>=a-2)for(let e=a-2;e<=a;e++)ba.push({text:e});else ba.push({text:"..."}),ba.push({text:a})}ma.value===a?fa.isNext=!1:fa.isNext=!0}};return(a,e)=>{const l=r("router-link");return k(),u(f,null,[o("div",j,[o("nav",A,[o("ul",N,[o("li",C,[T,c(l,{to:"/home"},{default:d((()=>[v("Home")])),_:1})]),o("li",B,[D,c(l,{to:"/archives"},{default:d((()=>[v("Archives")])),_:1})]),o("li",F,[H,c(l,{to:"/about"},{default:d((()=>[v("About")])),_:1})])]),L,q,o("span",z,[E,I,o("div",M,[O,o("ul",null,[ca.value?(k(),u("li",Q,[ca.value.isRoot?(k(),u("span",R,[v("Power by "),c(l,{to:{path:"/login"}},{default:d((()=>[o("a",U,p(ca.value.name),1)])),_:1})])):(k(),u("span",$,"Power by "+p(ca.value.name),1))])):(k(),u("li",G,[o("span",null,[v("Power by "),c(l,{to:{path:"/login"}},{default:d((()=>[J])),_:1})])]))]),ca.value?(k(),u("ul",K,[o("li",null,[o("span",null,[c(l,{to:"/home",onClick:da},{default:d((()=>[v("QUIT")])),_:1})])])])):h("",!0)])])])]),o("div",S,[o("div",V,[o("div",W,p(va.value.name),1),o("div",X,[o("div",Y,[(k(!0),u(f,null,m(xa.value,((a,e)=>(k(),u(f,null,[o("div",null,[c(l,{class:"archive-year",to:{name:"yearArchives",params:{year:e,page:1}}},{default:d((()=>[v(p(e),1)])),_:2},1032,["to"])]),(k(!0),u(f,null,m(a,(a=>(k(),u("div",Z,[o("article",aa,[o("div",ea,[o("header",la,[c(l,{to:{name:"blog",params:{id:a.id}}},{default:d((()=>[o("time",{datetime:a.date,itemprop:"datePublished"},p(a.date),9,ta)])),_:2},1032,["to"]),o("h1",sa,[c(l,{to:{name:"blog",params:{id:a.id}}},{default:d((()=>[v(p(a.title),1)])),_:2},1032,["to"])])])])])])))),256))],64)))),256))]),o("div",ia,[g(c(l,{class:"extend prev",rel:"prev",to:{name:"tags",params:{id:b(oa).params.id,page:ma.value-1}},onClick:ya},{default:d((()=>[v("Prev")])),_:1},8,["to"]),[[x,fa.isPrev]]),(k(!0),u(f,null,m(b(ba),(a=>(k(),u(f,null,[a.text===ma.value?(k(),u("span",na,p(a.text),1)):"..."!==a.text&&a.text!==ma.value?(k(),_(l,{key:a.text,class:"page-number",to:{name:"tags",params:{id:b(oa).params.id,page:a.text}},onClick:e=>{return l=a.text,void(ma.value=Number(l));var l}},{default:d((()=>[v(p(a.text),1)])),_:2},1032,["to","onClick"])):(k(),u("span",ra,"â€¦"))],64)))),256)),g(c(l,{class:"extend next",rel:"next",to:{name:"tags",params:{id:b(oa).params.id,page:ma.value+1}},onClick:ka},{default:d((()=>[v("Next")])),_:1},8,["to"]),[[x,fa.isNext]])])])])])],64)}}};export{ua as default};
